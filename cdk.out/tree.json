{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.237.1"},"children":{"exampletwo-stack":{"id":"exampletwo-stack","path":"exampletwo-stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.237.1"},"children":{"table-bucket":{"id":"table-bucket","path":"exampletwo-stack/table-bucket","constructInfo":{"fqn":"@aws-cdk/aws-s3tables-alpha.TableBucket","version":"2.236.0-alpha.0"},"children":{"table-bucket":{"id":"table-bucket","path":"exampletwo-stack/table-bucket/table-bucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3tables.CfnTableBucket","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3Tables::TableBucket","aws:cdk:cloudformation:props":{"tags":[{"key":"ENV","value":"exampletwo"}],"encryptionConfiguration":{"sseAlgorithm":"AES256"},"tableBucketName":"exampletwo","unreferencedFileRemoval":{"noncurrentDays":30,"status":"Enabled","unreferencedDays":30}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"exampletwo-stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"exampletwo-stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}},"Condition":{"id":"Condition","path":"exampletwo-stack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.237.1"}}}},"Exports":{"id":"Exports","path":"exampletwo-stack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Output{\"Fn::GetAtt\":[\"tablebucket8CC12CE3\",\"TableBucketARN\"]}":{"id":"Output{\"Fn::GetAtt\":[\"tablebucket8CC12CE3\",\"TableBucketARN\"]}","path":"exampletwo-stack/Exports/Output{\"Fn::GetAtt\":[\"tablebucket8CC12CE3\",\"TableBucketARN\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"exampletwo-stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.237.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"exampletwo-stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.237.1"}}}},"test-stack":{"id":"test-stack","path":"test-stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.237.1"},"children":{"exampletwobucketr4ndom1shstrng-stack":{"id":"exampletwobucketr4ndom1shstrng-stack","path":"test-stack/exampletwobucketr4ndom1shstrng-stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.237.1"},"children":{"bucket":{"id":"bucket","path":"test-stack/exampletwobucketr4ndom1shstrng-stack/bucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"test-stack/exampletwobucketr4ndom1shstrng-stack/bucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"exampletwobucketr4ndom1shstrng","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"ENV","value":"exampletwo"}]}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"test-stack/exampletwobucketr4ndom1shstrng-stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"test-stack/exampletwobucketr4ndom1shstrng-stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}},"Condition":{"id":"Condition","path":"test-stack/exampletwobucketr4ndom1shstrng-stack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.237.1"}}}},"Exports":{"id":"Exports","path":"test-stack/exampletwobucketr4ndom1shstrng-stack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Output{\"Fn::GetAtt\":[\"bucket43879C71\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"bucket43879C71\",\"Arn\"]}","path":"test-stack/exampletwobucketr4ndom1shstrng-stack/Exports/Output{\"Fn::GetAtt\":[\"bucket43879C71\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"test-stack/exampletwobucketr4ndom1shstrng-stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.237.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"test-stack/exampletwobucketr4ndom1shstrng-stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.237.1"}}}},"s3-table-namespace-exampletwo":{"id":"s3-table-namespace-exampletwo","path":"test-stack/s3-table-namespace-exampletwo","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"exampletwo":{"id":"exampletwo","path":"test-stack/s3-table-namespace-exampletwo/exampletwo","constructInfo":{"fqn":"aws-cdk-lib.aws_s3tables.CfnNamespace","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3Tables::Namespace","aws:cdk:cloudformation:props":{"namespace":"exampletwo","tableBucketArn":{"Fn::ImportValue":"exampletwo-stack:ExportsOutputFnGetAtttablebucket8CC12CE3TableBucketARN49F85691"}}}}}},"firehose-exampletwo":{"id":"firehose-exampletwo","path":"test-stack/firehose-exampletwo","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"exampletwo-firehose-role-v1":{"id":"exampletwo-firehose-role-v1","path":"test-stack/firehose-exampletwo/exampletwo-firehose-role-v1","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"test-stack/firehose-exampletwo/exampletwo-firehose-role-v1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"firehose.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"ENV","value":"exampletwo"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"test-stack/firehose-exampletwo/exampletwo-firehose-role-v1/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"test-stack/firehose-exampletwo/exampletwo-firehose-role-v1/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["firehoseexampletwoexampletwofirehoseloggroupv175EAD7FB","Arn"]}}],"Version":"2012-10-17"},"policyName":"firehoseexampletwoexampletwofirehoserolev1DefaultPolicyE923E546","roles":[{"Ref":"firehoseexampletwoexampletwofirehoserolev1391F79A6"}]}}}}}}},"exampletwo-firehose-log-group-v1":{"id":"exampletwo-firehose-log-group-v1","path":"test-stack/firehose-exampletwo/exampletwo-firehose-log-group-v1","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"test-stack/firehose-exampletwo/exampletwo-firehose-log-group-v1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":731,"tags":[{"key":"ENV","value":"exampletwo"}]}}}}},"exampletwo-firehose-log-stream-v1":{"id":"exampletwo-firehose-log-stream-v1","path":"test-stack/firehose-exampletwo/exampletwo-firehose-log-stream-v1","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogStream","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"test-stack/firehose-exampletwo/exampletwo-firehose-log-stream-v1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogStream","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogStream","aws:cdk:cloudformation:props":{"logGroupName":{"Ref":"firehoseexampletwoexampletwofirehoseloggroupv175EAD7FB"}}}}}},"firehose":{"id":"firehose","path":"test-stack/firehose-exampletwo/firehose","constructInfo":{"fqn":"aws-cdk-lib.aws_kinesisfirehose.CfnDeliveryStream","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KinesisFirehose::DeliveryStream","aws:cdk:cloudformation:props":{"deliveryStreamName":"exampletwo","deliveryStreamType":"DirectPut","icebergDestinationConfiguration":{"catalogConfiguration":{"catalogArn":{"Fn::Join":["",["arn:aws:glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog/s3tablescatalog/exampletwo"]]}},"roleArn":{"Fn::GetAtt":["firehoseexampletwoexampletwofirehoserolev1391F79A6","Arn"]},"s3Configuration":{"bucketArn":{"Fn::ImportValue":"teststackexampletwobucketr4ndom1shstrngstack8EC1E602:ExportsOutputFnGetAttbucket43879C71Arn20063EB0"},"roleArn":{"Fn::GetAtt":["firehoseexampletwoexampletwofirehoserolev1391F79A6","Arn"]},"compressionFormat":"UNCOMPRESSED","errorOutputPrefix":""},"appendOnly":true,"bufferingHints":{"intervalInSeconds":30,"sizeInMBs":64},"cloudWatchLoggingOptions":{"enabled":true,"logGroupName":{"Ref":"firehoseexampletwoexampletwofirehoseloggroupv175EAD7FB"},"logStreamName":{"Ref":"firehoseexampletwoexampletwofirehoselogstreamv1F2580760"}},"destinationTableConfigurationList":[{"destinationDatabaseName":"exampletwo","destinationTableName":"daily_sales"}],"s3BackupMode":"FailedDataOnly"},"tags":[{"key":"ENV","value":"exampletwo"}]}}}}},"firehose-iceberg-destination-daily-sales":{"id":"firehose-iceberg-destination-daily-sales","path":"test-stack/firehose-iceberg-destination-daily-sales","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"firehose-inline-policy":{"id":"firehose-inline-policy","path":"test-stack/firehose-iceberg-destination-daily-sales/firehose-inline-policy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"test-stack/firehose-iceberg-destination-daily-sales/firehose-inline-policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["glue:GetTable","glue:GetDatabase","glue:UpdateTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog"]]},{"Fn::Join":["",["arn:aws:glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog/s3tablescatalog"]]},{"Fn::Join":["",["arn:aws:glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog/s3tablescatalog/*"]]},{"Fn::Join":["",["arn:aws:glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":database/s3tablescatalog/exampletwo/exampletwo"]]},{"Fn::Join":["",["arn:aws:glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":table/s3tablescatalog/exampletwo/exampletwo/daily_sales"]]}],"Sid":"AllowReadFromCatalogViaS3TableGlueFederation"},{"Action":"lakeformation:GetDataAccess","Effect":"Allow","Resource":"*","Sid":"WhenDoingMetadataReadsANDDataAndMetadataWriteViaLakeformation"},{"Action":["s3:Get*","s3:List*","s3:AbortMultipartUpload","s3:PutObject","s3:DeleteObject"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"teststackexampletwobucketr4ndom1shstrngstack8EC1E602:ExportsOutputFnGetAttbucket43879C71Arn20063EB0"},{"Fn::Join":["",[{"Fn::ImportValue":"teststackexampletwobucketr4ndom1shstrngstack8EC1E602:ExportsOutputFnGetAttbucket43879C71Arn20063EB0"},"/*"]]}],"Sid":"S3DeliveryErrorBucketPermission"},{"Action":["kms:Decrypt","kms:GenerateDataKey"],"Condition":{"StringEquals":{"kms:ViaService":"s3.us-east-1.amazonaws.com"},"StringLike":{"kms:EncryptionContext:aws:s3:arn":{"Fn::Join":["",[{"Fn::ImportValue":"teststackexampletwobucketr4ndom1shstrngstack8EC1E602:ExportsOutputFnGetAttbucket43879C71Arn20063EB0"},"/*"]]}}},"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:kms:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":key/*"]]}}],"Version":"2012-10-17"},"policyName":"firehoseicebergdestinationdailysalesfirehoseinlinepolicy056B779A","roles":[{"Ref":"firehoseexampletwoexampletwofirehoserolev1391F79A6"}]}}}}},"daily-sales-lf-table-permissions-for-firehose":{"id":"daily-sales-lf-table-permissions-for-firehose","path":"test-stack/firehose-iceberg-destination-daily-sales/daily-sales-lf-table-permissions-for-firehose","constructInfo":{"fqn":"aws-cdk-lib.aws_lakeformation.CfnPermissions","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::LakeFormation::Permissions","aws:cdk:cloudformation:props":{"dataLakePrincipal":{"dataLakePrincipalIdentifier":{"Fn::GetAtt":["firehoseexampletwoexampletwofirehoserolev1391F79A6","Arn"]}},"permissions":["ALL"],"permissionsWithGrantOption":[],"resource":{"tableResource":{"catalogId":{"Fn::Join":["",[{"Ref":"AWS::AccountId"},":s3tablescatalog/exampletwo"]]},"databaseName":"exampletwo","name":"daily_sales"}}}}}}},"exampletwo-stack":{"id":"exampletwo-stack","path":"test-stack/exampletwo-stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.237.1"},"children":{"vector-bucket":{"id":"vector-bucket","path":"test-stack/exampletwo-stack/vector-bucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3vectors.CfnVectorBucket","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3Vectors::VectorBucket","aws:cdk:cloudformation:props":{"vectorBucketName":"exampletwo"}}},"CDKMetadata":{"id":"CDKMetadata","path":"test-stack/exampletwo-stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"test-stack/exampletwo-stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}},"Condition":{"id":"Condition","path":"test-stack/exampletwo-stack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.237.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"test-stack/exampletwo-stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.237.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"test-stack/exampletwo-stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.237.1"}}}},"my-vector-index":{"id":"my-vector-index","path":"test-stack/my-vector-index","constructInfo":{"fqn":"aws-cdk-lib.aws_s3vectors.CfnIndex","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3Vectors::Index","aws:cdk:cloudformation:props":{"dataType":"float32","dimension":384,"distanceMetric":"cosine","indexName":"docs-minilm-384-cosine","metadataConfiguration":{"nonFilterableMetadataKeys":["sales_amount"]},"vectorBucketName":"exampletwo"}}},"exampletwo-embedding-stack":{"id":"exampletwo-embedding-stack","path":"test-stack/exampletwo-embedding-stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.237.1"},"children":{"exampletwo-embedding-lambda":{"id":"exampletwo-embedding-lambda","path":"test-stack/exampletwo-embedding-stack/exampletwo-embedding-lambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.237.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"test-stack/exampletwo-embedding-stack/exampletwo-embedding-lambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"test-stack/exampletwo-embedding-stack/exampletwo-embedding-lambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"ENV","value":"exampletwo"}]}}}}},"AssetImage":{"id":"AssetImage","path":"test-stack/exampletwo-embedding-stack/exampletwo-embedding-lambda/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.237.1"},"children":{"Staging":{"id":"Staging","path":"test-stack/exampletwo-embedding-stack/exampletwo-embedding-lambda/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.237.1"}},"Repository":{"id":"Repository","path":"test-stack/exampletwo-embedding-stack/exampletwo-embedding-lambda/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.237.1"}}}},"Resource":{"id":"Resource","path":"test-stack/exampletwo-embedding-stack/exampletwo-embedding-lambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"imageUri":{"Fn::Sub":"${AWS::AccountId}.dkr.ecr.${AWS::Region}.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}:ddc76d54bdadfee666136ddd9dec73966f99cbc0158ab3ed196d2a3682f93c9a"}},"functionName":"exampletwo-embedding-lambda","imageConfig":{"command":["handler.handler"]},"memorySize":1024,"packageType":"Image","role":{"Fn::GetAtt":["exampletwoembeddinglambdaServiceRoleBDD8D5F1","Arn"]},"tags":[{"key":"ENV","value":"exampletwo"}],"timeout":120}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"test-stack/exampletwo-embedding-stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"test-stack/exampletwo-embedding-stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}},"Condition":{"id":"Condition","path":"test-stack/exampletwo-embedding-stack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.237.1"}}}},"Exports":{"id":"Exports","path":"test-stack/exampletwo-embedding-stack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Output{\"Ref\":\"exampletwoembeddinglambda72C44999\"}":{"id":"Output{\"Ref\":\"exampletwoembeddinglambda72C44999\"}","path":"test-stack/exampletwo-embedding-stack/Exports/Output{\"Ref\":\"exampletwoembeddinglambda72C44999\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"test-stack/exampletwo-embedding-stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.237.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"test-stack/exampletwo-embedding-stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.237.1"}}}},"exampletwo_agent_runtime-stack":{"id":"exampletwo_agent_runtime-stack","path":"test-stack/exampletwo_agent_runtime-stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.237.1"},"children":{"agent-runtime":{"id":"agent-runtime","path":"test-stack/exampletwo_agent_runtime-stack/agent-runtime","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-agentcore-alpha.Runtime","version":"2.237.1-alpha.0"},"children":{"ExecutionRole":{"id":"ExecutionRole","path":"test-stack/exampletwo_agent_runtime-stack/agent-runtime/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"test-stack/exampletwo_agent_runtime-stack/agent-runtime/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock-agentcore.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Execution role for Bedrock Agent Core Runtime","maxSessionDuration":28800,"tags":[{"key":"ENV","value":"exampletwo"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"test-stack/exampletwo_agent_runtime-stack/agent-runtime/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"test-stack/exampletwo_agent_runtime-stack/agent-runtime/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DescribeLogStreams","logs:CreateLogGroup"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/bedrock-agentcore/runtimes/*"]]},"Sid":"LogGroupAccess"},{"Action":"logs:DescribeLogGroups","Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:*"]]},"Sid":"DescribeLogGroups"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/bedrock-agentcore/runtimes/*:log-stream:*"]]},"Sid":"LogStreamAccess"},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*","Sid":"XRayAccess"},{"Action":"cloudwatch:PutMetricData","Condition":{"StringEquals":{"cloudwatch:namespace":"bedrock-agentcore"}},"Effect":"Allow","Resource":"*","Sid":"CloudWatchMetrics"},{"Action":["bedrock-agentcore:GetWorkloadAccessToken","bedrock-agentcore:GetWorkloadAccessTokenForJWT","bedrock-agentcore:GetWorkloadAccessTokenForUserId"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock-agentcore:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":workload-identity-directory/default"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock-agentcore:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":workload-identity-directory/default/workload-identity/*"]]}],"Sid":"GetAgentAccessToken"},{"Action":["s3vectors:QueryVectors","s3vectors:GetVectors"],"Effect":"Allow","Resource":"*"},{"Action":["bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream"],"Effect":"Allow","Resource":"*"},{"Action":["ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":ecr:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":repository/",{"Fn::Sub":"cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}"}]]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"agentruntimeExecutionRoleDefaultPolicy300986AF","roles":[{"Ref":"agentruntimeExecutionRoleBB0381FD"}]}}}}}}},"Resource":{"id":"Resource","path":"test-stack/exampletwo_agent_runtime-stack/agent-runtime/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrockagentcore.CfnRuntime","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::BedrockAgentCore::Runtime","aws:cdk:cloudformation:props":{"agentRuntimeArtifact":{"containerConfiguration":{"containerUri":{"Fn::Sub":"${AWS::AccountId}.dkr.ecr.${AWS::Region}.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}:b9b4555c00893f5bab3ae938e01e9c3fdc67384885e6ddff683d1ce8a777b43f"}}},"agentRuntimeName":"exampletwo_agent_runtime","tags":{"ENV":"exampletwo"},"environmentVariables":{"EMBEDDING_LAMBDA_NAME":{"Fn::ImportValue":"teststackexampletwoembeddingstackDC6E2243:ExportsOutputRefexampletwoembeddinglambda72C44999D2DD1C20"}},"lifecycleConfiguration":{},"networkConfiguration":{"networkMode":"PUBLIC"},"protocolConfiguration":"HTTP","roleArn":{"Fn::GetAtt":["agentruntimeExecutionRoleBB0381FD","Arn"]}}}},"AgentRuntimeArtifact":{"id":"AgentRuntimeArtifact","path":"test-stack/exampletwo_agent_runtime-stack/agent-runtime/AgentRuntimeArtifact","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.237.1"},"children":{"Staging":{"id":"Staging","path":"test-stack/exampletwo_agent_runtime-stack/agent-runtime/AgentRuntimeArtifact/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.237.1"}},"Repository":{"id":"Repository","path":"test-stack/exampletwo_agent_runtime-stack/agent-runtime/AgentRuntimeArtifact/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.237.1"}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"test-stack/exampletwo_agent_runtime-stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"test-stack/exampletwo_agent_runtime-stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}},"Condition":{"id":"Condition","path":"test-stack/exampletwo_agent_runtime-stack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.237.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"test-stack/exampletwo_agent_runtime-stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.237.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"test-stack/exampletwo_agent_runtime-stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.237.1"}}}},"CDKMetadata":{"id":"CDKMetadata","path":"test-stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"test-stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}},"Condition":{"id":"Condition","path":"test-stack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.237.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"test-stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.237.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"test-stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.237.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}